# å¿«é€Ÿå…¥é—¨æŒ‡å—

<cite>
**æœ¬æ–‡æ¡£ä¸­å¼•ç”¨çš„æ–‡ä»¶**  
- [START_GUIDE.md](file://START_GUIDE.md)
- [DEPLOYMENT_SUMMARY.md](file://DEPLOYMENT_SUMMARY.md)
- [start_backend_core.py](file://start_backend_core.py)
- [start_backend_api.py](file://start_backend_api.py)
- [start_frontend.py](file://start_frontend.py)
- [backend_core/config/config.example.py](file://backend_core/config/config.example.py)
- [env_example.txt](file://env_example.txt)
- [backend_api/requirements.txt](file://backend_api/requirements.txt)
- [admin/package.json](file://admin/package.json)
- [deploy_config.json](file://deploy_config.json)
</cite>

## ç›®å½•
1. [ç³»ç»Ÿè¦æ±‚](#ç³»ç»Ÿè¦æ±‚)
2. [å…‹éš†ä»“åº“](#å…‹éš†ä»“åº“)
3. [é…ç½®è™šæ‹Ÿç¯å¢ƒ](#é…ç½®è™šæ‹Ÿç¯å¢ƒ)
4. [å®‰è£…å‰åç«¯ä¾èµ–](#å®‰è£…å‰åç«¯ä¾èµ–)
5. [è®¾ç½®æ•°æ®åº“è¿æ¥](#è®¾ç½®æ•°æ®åº“è¿æ¥)
6. [å‡†å¤‡APIå¯†é’¥](#å‡†å¤‡apiå¯†é’¥)
7. [å¯åŠ¨æœåŠ¡](#å¯åŠ¨æœåŠ¡)
8. [å…³é”®å¯åŠ¨è„šæœ¬ä½¿ç”¨æ–¹æ³•](#å…³é”®å¯åŠ¨è„šæœ¬ä½¿ç”¨æ–¹æ³•)
9. [å¸¸è§é—®é¢˜æ’æŸ¥](#å¸¸è§é—®é¢˜æ’æŸ¥)
10. [è®¿é—®ç³»ç»Ÿ](#è®¿é—®ç³»ç»Ÿ)

## ç³»ç»Ÿè¦æ±‚

- **Python 3.8+** (æ¨è3.9æˆ–æ›´é«˜ç‰ˆæœ¬)
- **ç°ä»£æµè§ˆå™¨** (Chrome 90+, Firefox 88+, Safari 14+, Edge 90+)
- **ç½‘ç»œè¿æ¥** (ç”¨äºè·å–å®æ—¶è‚¡ç¥¨æ•°æ®)
- **Windows/Linux/macOS** (è·¨å¹³å°æ”¯æŒ)

**Section sources**
- [START_GUIDE.md](file://START_GUIDE.md#L1-L10)

## å…‹éš†ä»“åº“

```bash
# å…‹éš†é¡¹ç›®ä»“åº“
git clone https://github.com/your-username/stock_quote_analayze.git
cd stock_quote_analayze
```

**Section sources**
- [START_GUIDE.md](file://START_GUIDE.md#L31-L35)

## é…ç½®è™šæ‹Ÿç¯å¢ƒ

```bash
# åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
python -m venv venv

# æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ
# Windows:
venv\Scripts\activate
# Linux/macOS:
source venv/bin/activate

# (å¯é€‰) åˆ›å»ºç”Ÿäº§ç¯å¢ƒè™šæ‹Ÿç¯å¢ƒ
python -m venv venv-prod
```

**Section sources**
- [DEPLOYMENT_SUMMARY.md](file://DEPLOYMENT_SUMMARY.md#L65-L75)

## å®‰è£…å‰åç«¯ä¾èµ–

### å®‰è£…åç«¯ä¾èµ–

```bash
# å®‰è£…ä¸»é¡¹ç›®ä¾èµ–
pip install -r requirements.txt

# å®‰è£…backend_coreä¾èµ–
pip install -r backend_core/requirements.txt

# å®‰è£…backend_apiä¾èµ–
pip install -r backend_api/requirements.txt
```

### å®‰è£…å‰ç«¯ä¾èµ–

```bash
# è¿›å…¥adminç›®å½•å®‰è£…Vue 3ä¾èµ–
cd admin
npm install

# è¿”å›é¡¹ç›®æ ¹ç›®å½•
cd ..
```

**Section sources**
- [DEPLOYMENT_SUMMARY.md](file://DEPLOYMENT_SUMMARY.md#L80-L95)
- [admin/package.json](file://admin/package.json#L1-L54)

## è®¾ç½®æ•°æ®åº“è¿æ¥

### åˆ›å»ºç¯å¢ƒé…ç½®æ–‡ä»¶

```bash
# å¤åˆ¶ç¯å¢ƒå˜é‡ç¤ºä¾‹æ–‡ä»¶
copy env_example.txt .env
# æˆ– Linux/macOS:
cp env_example.txt .env
```

### é…ç½®æ•°æ®åº“å‚æ•°

ç¼–è¾‘ `.env` æ–‡ä»¶ä¸­çš„æ•°æ®åº“é…ç½®ï¼š

```env
# æ•°æ®åº“ç±»å‹ (postgresql, sqlite)
DB_TYPE=postgresql

# PostgreSQLé…ç½® (ç”Ÿäº§ç¯å¢ƒ)
DB_HOST=localhost
DB_PORT=5432
DB_NAME=stock_analysis
DB_USER=postgres
DB_PASSWORD=yourpassword

# SQLiteé…ç½® (å¼€å‘ç¯å¢ƒ)
SQLITE_DB_PATH=database/stock_analysis.db
```

**Section sources**
- [env_example.txt](file://env_example.txt#L25-L55)

## å‡†å¤‡APIå¯†é’¥

### é…ç½®æ•°æ®æºAPIå¯†é’¥

ç¼–è¾‘ `.env` æ–‡ä»¶ï¼Œè®¾ç½®æ•°æ®æºAPIå¯†é’¥ï¼š

```env
# Tushare APIå¯†é’¥ (å¿…å¡«)
TUSHARE_TOKEN=your_tushare_token_here

# Akshare (æ— éœ€å¯†é’¥ï¼Œä¿æŒå¯ç”¨å³å¯)
ENABLE_AKSHARE=true
```

### è·å–Tushare Token

1. è®¿é—® [Tushareå®˜ç½‘](https://tushare.pro/)
2. æ³¨å†Œè´¦å·å¹¶ç™»å½•
3. åœ¨ä¸ªäººä¸­å¿ƒè·å–API Token
4. å°†Tokenå¡«å…¥ `.env` æ–‡ä»¶çš„ `TUSHARE_TOKEN` å­—æ®µ

**Section sources**
- [env_example.txt](file://env_example.txt#L125-L135)
- [backend_core/config/config.example.py](file://backend_core/config/config.example.py#L35-L50)

## å¯åŠ¨æœåŠ¡

### å¯åŠ¨é¡ºåº

å»ºè®®æŒ‰ç…§ä»¥ä¸‹é¡ºåºå¯åŠ¨æœåŠ¡ï¼š

1. **backend_core** - æ•°æ®é‡‡é›†å¼•æ“
2. **backend_api** - åç«¯APIæœåŠ¡
3. **frontend** - å‰ç«¯å¼€å‘æœåŠ¡å™¨

### å¹¶è¡Œå¯åŠ¨ï¼ˆæ¨èï¼‰

åœ¨ä¸‰ä¸ªä¸åŒçš„ç»ˆç«¯çª—å£ä¸­åˆ†åˆ«è¿è¡Œï¼š

```bash
# ç»ˆç«¯1: å¯åŠ¨æ•°æ®é‡‡é›†å¼•æ“
python start_backend_core.py

# ç»ˆç«¯2: å¯åŠ¨åç«¯APIæœåŠ¡
python start_backend_api.py

# ç»ˆç«¯3: å¯åŠ¨å‰ç«¯å¼€å‘æœåŠ¡å™¨
python start_frontend.py
```

**Section sources**
- [START_GUIDE.md](file://START_GUIDE.md#L37-L55)

## å…³é”®å¯åŠ¨è„šæœ¬ä½¿ç”¨æ–¹æ³•

### start_backend_core.py

å¯åŠ¨æ•°æ®é‡‡é›†å¼•æ“ï¼š

```bash
# åŸºæœ¬ç”¨æ³•
python start_backend_core.py

# è„šæœ¬åŠŸèƒ½ï¼š
# 1. æ£€æŸ¥ä¾èµ–åŒ… (apscheduler, akshare, tushare, pandas)
# 2. å¯åŠ¨å®šæ—¶é‡‡é›†è¿›ç¨‹
# 3. è‡ªåŠ¨æ‹‰èµ·åå°æ•°æ®é‡‡é›†ä»»åŠ¡
# 4. æ—¥å¿—è¾“å‡ºåˆ° backend_core/logs/ ç›®å½•
```

**Section sources**
- [start_backend_core.py](file://start_backend_core.py#L1-L45)

### start_backend_api.py

å¯åŠ¨åç«¯APIæœåŠ¡ï¼š

```bash
# åŸºæœ¬ç”¨æ³•
python start_backend_api.py

# è‡ªå®šä¹‰ç«¯å£
python start_backend_api.py --port 5001

# è„šæœ¬ç‰¹ç‚¹ï¼š
# - è‡ªåŠ¨æ·»åŠ backend_apiåˆ°Pythonè·¯å¾„
# - ä½¿ç”¨Uvicornè¿è¡ŒFastAPIåº”ç”¨
# - å¼€å¯çƒ­é‡è½½æ¨¡å¼ (å¼€å‘ç¯å¢ƒ)
# - ç›‘å¬backend_apiç›®å½•å˜åŒ–
```

**Section sources**
- [start_backend_api.py](file://start_backend_api.py#L1-L33)

### start_frontend.py

å¯åŠ¨å‰ç«¯å¼€å‘æœåŠ¡å™¨ï¼š

```bash
# åŸºæœ¬ç”¨æ³•
python start_frontend.py

# è„šæœ¬åŠŸèƒ½ï¼š
# 1. è‡ªåŠ¨æŸ¥æ‰¾å¯ç”¨ç«¯å£ (ä»8000å¼€å§‹)
# 2. å¯åŠ¨HTTPæœåŠ¡å™¨æœåŠ¡frontendç›®å½•
# 3. æ ¹è·¯å¾„è‡ªåŠ¨é‡å®šå‘åˆ°/login.html
# 4. è‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨è®¿é—®ç™»å½•é¡µé¢
# 5. æ”¯æŒCORSè·¨åŸŸè¯·æ±‚
```

**Section sources**
- [start_frontend.py](file://start_frontend.py#L1-L91)

## å¸¸è§é—®é¢˜æ’æŸ¥

### ç«¯å£å†²çª

**ç°è±¡**: `Address already in use` æˆ–ç«¯å£è¢«å ç”¨

**è§£å†³æ–¹æ¡ˆ**:
```bash
# æ£€æŸ¥ç«¯å£å ç”¨æƒ…å†µ
# Windows:
netstat -ano | findstr :5000
# Linux/macOS:
lsof -i :5000

# è§£å†³æ–¹æ¡ˆ1: ç»ˆæ­¢å ç”¨è¿›ç¨‹
# Windows:
taskkill /PID <è¿›ç¨‹ID> /F
# Linux/macOS:
kill -9 <è¿›ç¨‹ID>

# è§£å†³æ–¹æ¡ˆ2: æ›´æ”¹ç«¯å£
python start_backend_api.py --port 5001
python start_frontend.py  # è‡ªåŠ¨å¯»æ‰¾å¯ç”¨ç«¯å£
```

**Section sources**
- [START_GUIDE.md](file://START_GUIDE.md#L185-L200)

### ä¾èµ–ç¼ºå¤±

**ç°è±¡**: `ModuleNotFoundError` æˆ– `ImportError`

**è§£å†³æ–¹æ¡ˆ**:
```bash
# é‡æ–°å®‰è£…ä¸»ä¾èµ–
pip install -r requirements.txt

# å®‰è£…backend_coreä¾èµ–
pip install -r backend_core/requirements.txt

# å®‰è£…backend_apiä¾èµ–
pip install -r backend_api/requirements.txt

# å‡çº§pipå¹¶æ¸…ç†ç¼“å­˜
python -m pip install --upgrade pip
pip cache purge
```

**Section sources**
- [START_GUIDE.md](file://START_GUIDE.md#L180-L184)
- [DEPLOYMENT_SUMMARY.md](file://DEPLOYMENT_SUMMARY.md#L260-L270)

### æ•°æ®åº“è¿æ¥å¤±è´¥

**ç°è±¡**: `no such table: users` æˆ–æ•°æ®åº“è¿æ¥é”™è¯¯

**è§£å†³æ–¹æ¡ˆ**:
```bash
# æ–¹æ¡ˆ1: é‡æ–°åˆå§‹åŒ–æ•°æ®åº“
# åˆ é™¤æ•°æ®åº“æ–‡ä»¶ï¼ˆå¼€å‘ç¯å¢ƒï¼‰
rm database/stock_analysis.db
# é‡æ–°å¯åŠ¨åç«¯æœåŠ¡
python start_backend_api.py

# æ–¹æ¡ˆ2: æ£€æŸ¥ç¯å¢ƒå˜é‡é…ç½®
# ç¡®è®¤.envæ–‡ä»¶ä¸­çš„æ•°æ®åº“é…ç½®æ­£ç¡®
# æ£€æŸ¥DB_TYPEã€DB_HOSTã€DB_PORTç­‰å‚æ•°

# æ–¹æ¡ˆ3: æµ‹è¯•æ•°æ®åº“è¿æ¥
python backend_api/test_db.py
```

**Section sources**
- [START_GUIDE.md](file://START_GUIDE.md#L235-L245)
- [env_example.txt](file://env_example.txt#L25-L55)

### æ•°æ®é‡‡é›†å¤±è´¥

**ç°è±¡**: æ•°æ®é‡‡é›†å¼•æ“å¯åŠ¨å¤±è´¥æˆ–æ•°æ®æ›´æ–°ä¸åŠæ—¶

**è§£å†³æ–¹æ¡ˆ**:
```bash
# æ£€æŸ¥Tushare Tokené…ç½®
# ç¡®è®¤.envæ–‡ä»¶ä¸­çš„TUSHARE_TOKENæ­£ç¡®

# æ£€æŸ¥ç½‘ç»œè¿æ¥
ping api.tushare.pro

# æŸ¥çœ‹é‡‡é›†æ—¥å¿—
# backend_core/logs/ ç›®å½•ä¸‹çš„æ—¥å¿—æ–‡ä»¶

# æ‰‹åŠ¨æµ‹è¯•æ•°æ®é‡‡é›†
python backend_core/data_collectors/tushare/main.py
```

**Section sources**
- [backend_core/config/config.example.py](file://backend_core/config/config.example.py#L35-L50)

### è·¨åŸŸé—®é¢˜(CORS)

**ç°è±¡**: æµè§ˆå™¨æ§åˆ¶å°å‡ºç°CORSé”™è¯¯

**è§£å†³æ–¹æ¡ˆ**:
```bash
# ç¡®è®¤åç«¯å·²å®‰è£…CORSæ”¯æŒ
pip install fastapi[all]

# æ£€æŸ¥å‰ç«¯APIåœ°å€é…ç½®
# frontend/js/config.jsä¸­çš„APIåœ°å€åº”ä¸ºhttp://localhost:5000

# æ£€æŸ¥.envæ–‡ä»¶ä¸­çš„CORSé…ç½®
CORS_ALLOW_ORIGINS=http://localhost:8000,http://localhost:8001
```

**Section sources**
- [START_GUIDE.md](file://START_GUIDE.md#L220-L230)

## è®¿é—®ç³»ç»Ÿ

### æœåŠ¡åœ°å€

å¯åŠ¨æˆåŠŸåï¼Œå¯é€šè¿‡ä»¥ä¸‹åœ°å€è®¿é—®ç³»ç»Ÿï¼š

- **ç™»å½•é¡µé¢**: http://localhost:8000/login.html
- **é¦–é¡µ**: http://localhost:8000/index.html
- **åç«¯API**: http://localhost:5000
- **ç®¡ç†åå°**: http://localhost:8000/admin
- **APIæ–‡æ¡£**: http://localhost:5000/docs

### é¢„æœŸè¾“å‡º

å¯åŠ¨è„šæœ¬çš„é¢„æœŸè¾“å‡ºç¤ºä¾‹ï¼š

**åç«¯APIå¯åŠ¨æˆåŠŸ**:
```
ğŸš€ å¯åŠ¨è‚¡ç¥¨åˆ†æç³»ç»Ÿåç«¯æœåŠ¡...
ğŸ“ å½“å‰å·¥ä½œç›®å½•: E:\wangxw\è‚¡ç¥¨åˆ†æè½¯ä»¶\ç¼–ç \stock_quote_analayze
ğŸ Pythonè·¯å¾„: E:\wangxw\è‚¡ç¥¨åˆ†æè½¯ä»¶\ç¼–ç \stock_quote_analayze\backend_api
INFO:     Uvicorn running on http://0.0.0.0:5000
INFO:     Started reloader process [12345]
INFO:     Started server process [12347]
INFO:     Waiting for application startup.
```

**å‰ç«¯å¯åŠ¨æˆåŠŸ**:
```
============================================================
           è‚¡ç¥¨åˆ†æç³»ç»Ÿå‰ç«¯å¯åŠ¨å™¨
============================================================
âœ“ å‰ç«¯æœåŠ¡å™¨å¯åŠ¨æˆåŠŸ
âœ“ æœåŠ¡åœ°å€: http://localhost:8000
âœ“ ç™»å½•é¡µé¢: http://localhost:8000/login.html
âœ“ é¦–é¡µ: http://localhost:8000/index.html
âœ“ ç®¡ç†åå°: http://localhost:8000/admin
------------------------------------------------------------
æŒ‰ Ctrl+C åœæ­¢æœåŠ¡
------------------------------------------------------------
```

**æ•°æ®é‡‡é›†å¼•æ“å¯åŠ¨æˆåŠŸ**:
```
==================================================
ğŸ“Š å¯åŠ¨ backend_core å®šæ—¶é‡‡é›†æœåŠ¡
==================================================
ğŸ” æ£€æŸ¥ä¾èµ–åŒ…...
âœ… ä¾èµ–åŒ…æ£€æŸ¥é€šè¿‡

ğŸš€ å¯åŠ¨å®šæ—¶é‡‡é›†è¿›ç¨‹...
âœ… backend_core å·²å¯åŠ¨ï¼Œå®šæ—¶é‡‡é›†è¿›ç¨‹å·²åœ¨åå°è¿è¡Œ
å¦‚éœ€æŸ¥çœ‹æ—¥å¿—ï¼Œè¯·æŸ¥çœ‹ backend_core/logs/ ç›®å½•
æŒ‰ Ctrl+C åœæ­¢æœåŠ¡
==================================================
```

**Section sources**
- [START_GUIDE.md](file://START_GUIDE.md#L60-L70)
- [DEPLOYMENT_SUMMARY.md](file://DEPLOYMENT_SUMMARY.md#L175-L185)